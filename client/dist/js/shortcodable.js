(()=>{var e,t={305:()=>{var e;e=jQuery,shortcodable={controller_url:"admin/shortcodable",initialized:!1,init:function(){this.initialized=!0,e("body").on("change","select.shortcode-type",(function(t){e.post(shortcodable.controller_url,e(this).parents("form").serializeArray(),(function(t){simpler.modal.bodyHtml=e("#xhr_buffer").html(t).html()})).fail((function(e){shortcodable.handleErrorResponse(e)}))})),e("body").on("submit","#Form_ShortcodeForm",(function(e){return e.preventDefault(),shortcodable.insertShortcode(),simpler.modal.show=!1,!1}))},openDialog:function(){simpler.modal.show=!0,simpler.modal.title="Insert/edit shortcode",simpler.modal.closeBtn=!1,simpler.modal.closeTxt="Close",simpler.modal.saveBtn=!1,simpler.modal.saveTxt="Insert shortcode",simpler.modal.bodyHtml=simpler.spinner,e.post(shortcodable.controller_url,shortcodable.getCurrentEditorSelectionAsParsedShortcodeData(),(function(t){simpler.modal.bodyHtml=e("#xhr_buffer").html(t).html()})).fail((function(e){shortcodable.handleErrorResponse(e)}))},handleErrorResponse:function(e){var t=e.responseText.split('<div class="header info error">').pop().split('<div class="info">').shift()||e.responseText;simpler.modal.bodyHtml='<div class="alert alert-danger"><strong>ERROR loading shortcode </strong>(‘'+e.statusText+"’):</div>"+t},insertShortcode:function(){var t=e("#Form_ShortcodeForm").serializeArray(),r=["..."];e.each(t,(function(e,t){"SecurityID"!==t.name&&("ShortcodeType"===t.name?r[0]=t.value:r.push("".concat(t.name,'="').concat(t.value,'"')))}));var o="[".concat(r.join(" "),"]");o.length&&(tinyMCE.activeEditor.selection.setContent(o),tinyMCE.activeEditor.undoManager.add())},getCurrentEditorSelectionAsParsedShortcodeData:function(){if(!tinyMCE.activeEditor.selection.isCollapsed()){var t=tinymce.activeEditor.selection.getContent().trim();if(!((t=shortcodable.placeholdersToShortcodes(t,tinyMCE.activeEditor)).length<=2||"["!==t.charAt(0)||"]"!==t.slice(-1))){var r={ShortcodeType:t.slice(1,-1).split(" ").shift()};return e.each(e("<".concat(t.slice(1,-1)," />")).get(0).attributes,(function(e,t){r[t.name]=t.value})),r}}},parseAttributeValue:function(e,t){var r=new RegExp(t+'="([^"]+)"',"g").exec(e);return r?tinymce.DOM.decode(r[1]):""},shortcodesToPlaceholders:function(t,r){var o=e(r.targetElm).data("shortcodableplaceholdercodes");return o?t.replace(/\[([a-z_]+)\s*([^\]]*)\]/gi,(function(e,t,r){if(-1!==o.indexOf(t)){var a=shortcodable.parseAttributeValue(r,"id"),n=encodeURI(shortcodable.controller_url+"/placeholder/"+t+"/"+a+"?sc=["+t+" "+r+"]");return jQuery("<img/>").attr("type","image/svg+xml").attr("class","sc-placeholder mceItem mceNonEditable").attr("title",t+" "+r).attr("src",n).prop("outerHTML")}return e})):t},placeholdersToShortcodes:function(e,t){var r=jQuery("<div>"+e+"</div>");return r.find(".sc-placeholder").each((function(){var e=jQuery(this);e.replaceWith("["+tinymce.trim(e.attr("title"))+"]")})),r.html()}}},355:()=>{}},r={};function o(e){var a=r[e];if(void 0!==a)return a.exports;var n=r[e]={exports:{}};return t[e](n,n.exports,o),n.exports}o.m=t,e=[],o.O=(t,r,a,n)=>{if(!r){var i=1/0;for(d=0;d<e.length;d++){for(var[r,a,n]=e[d],l=!0,s=0;s<r.length;s++)(!1&n||i>=n)&&Object.keys(o.O).every((e=>o.O[e](r[s])))?r.splice(s--,1):(l=!1,n<i&&(i=n));if(l){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[r,a,n]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={995:0,454:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var a,n,[i,l,s]=r,c=0;if(i.some((t=>0!==e[t]))){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(s)var d=s(o)}for(t&&t(r);c<i.length;c++)n=i[c],o.o(e,n)&&e[n]&&e[n][0](),e[i[c]]=0;return o.O(d)},r=self.webpackChunkbase_package_json=self.webpackChunkbase_package_json||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),o.O(void 0,[454],(()=>o(305)));var a=o.O(void 0,[454],(()=>o(355)));a=o.O(a)})();